<!-- Display comments here -->
<!-- <mat-list> -->
@if (isLoadingResults) {
<div class="example-loading-shade">
  <mat-spinner></mat-spinner>
</div>
} @if (feedback) {
<div class="alert alert-{{ feedback.type }} m-2">
  {{ feedback.message }}
</div>
} @if(comments) {
<!-- <mat-list-item
        *ngFor="let nestedComment of comments"
        style="margin-bottom: 10px"
      >
        <mat-card>
          <div mat-line>
            <small
              ><strong>{{ nestedComment.comment.author }}</strong> on
              {{ nestedComment.comment.date }}</small
            >
          </div>
          <div mat-line>{{ nestedComment.comment.text }}</div>
        </mat-card>
      </mat-list-item> -->
<div class="comments">
  <app-comment
    *ngFor="let comment of comments"
    [comment]="comment"
  ></app-comment>
</div>
}
<!-- </mat-list> -->

<hr />
<!-- Add comment form -->
<mat-card>
  <mat-card-header>
    <div class="comment-post-meta">
      <div mat-card-avatar class="comment-author-avatar" mat-card-sm-image>
        @if (newComment.profile_url) {
        <img [src]="newComment.profile_url" />
        } @else {
        <img src="../../../assets/defaulut-avatar.jpg" />
        }
      </div>
      <div class="comment-author-time">
        <div class="comment-author">{{ newComment.author }}</div>
      </div>
    </div>
  </mat-card-header>
  <mat-card-content style="padding-top: 16px">
    <div class="add-comment-form">
      <!-- <h3 style="font-weight: bold">Add a Comment</h3> -->
      <form style="width: -webkit-fill-available">
        <!-- <mat-form-field style="width: 100%">
          <mat-label>Your Name</mat-label>
          <input
            matInput
            placeholder="Your Name"
            [(ngModel)]="newComment.author"
            name="author"
            required
          />
        </mat-form-field> -->
        <mat-form-field style="width: 100%">
          <!-- <mat-label>Your Comment</mat-label> -->
          <textarea
            matInput
            placeholder="Your Comment"
            rows="2"
            [(ngModel)]="newComment.text"
            name="comment"
            required
          ></textarea>
        </mat-form-field>
        <button
          class="comment-submit"
          mat-raised-button
          color="primary"
          click="submitComment()"
        >
          Submit
        </button>
      </form>
    </div>
  </mat-card-content>
</mat-card>
